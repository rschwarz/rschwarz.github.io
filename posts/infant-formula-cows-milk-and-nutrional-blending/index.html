<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Infant Formula, Cow's Milk and Nutrional Blending | Frequently Answered Quantitatively</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#777777">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://rschwarz.github.io/posts/infant-formula-cows-milk-and-nutrional-blending/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><link rel="prev" href="../consonant-triads/" title="Consonant Triads" type="text/html">
<link rel="next" href="../index-funds-with-mixed-integer-programming/" title="Index Funds with Mixed-Integer-Programming" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://rschwarz.github.io/">

                <span id="blog-title">Frequently Answered Quantitatively</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../pages/about">About</a>
                </li>
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.ipynb" id="sourcelink">Source</a>
    </li>
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Infant Formula, Cow's Milk and Nutrional Blending</a></h1>

        <div class="metadata">
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2018-10-04T11:00:00+02:00" itemprop="datePublished" title="2018-10-04">2018-10-04</time></a></p>
                    <p class="sourceline"><a href="index.ipynb" class="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We compare the macronutrional content of baby formula with that of cow's milk and then try to recreate the formula by blending milk with water and adding supplements as needed.</p>
<p>Human milk has a vastly different macronutrient composition compared to that of other mammals, in particular cows. While the energy content is about the same, it is much richer in carbs and a lot lower in protein. The reasoning is that human babies already have a large and active brain for learning and need the sugar to fuel it. At the same time, their body does not need to grow as rapidly as that of other mammals who are already much more mature when born.</p>
<p>For parents who do not (or no longer) breastfeed their baby, a substitute can be used made from a powder, which mimics the nutritional content of human milk. As the baby turns older, and its digestive system is already used to different kinds of foods, cow milk (and other dairy products) may be introduced in the diet.</p>
<p>From other parents, I have heard that they will not feed cow's milk as is, but dilute it with water during the night. I wondered whether this approach is justified with respect to the macronutrients which led to the following analysis.</p>
<p><strong>This analysis is done purely out of curiosity. Please consult a health care professional prior to changing your infant's diet!</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data">Data<a class="anchor-link" href="#Data">¶</a>
</h2>
<p>As a reference for baby formula, we will use <a href="https://www.hipp.de/milchnahrung/produkte/hipp-combiotikR/hipp-bio-combiotikR-anfangsmilch/hipp-pre-bio-combiotikR/">Hipp PRE BIO COMBIOTIK</a>. They provide the following data on macronutrients:</p>

<pre><code>(Energy: 66 kcal / 100 ml)
Fat: 3.5 g / 100 ml
Carbs: 7.3 g / 100 ml
Protein: 1.25 g / 100 ml

</code></pre>
<p>For cow's milk, we will use both whole milk as well as reduced-fat milk. The macronutrients as given for milk at LIDL are, for whole milk:</p>

<pre><code>(Energy: 68 kcal / 100 ml)
Fat: 3.9 g / 100 ml
Carbs: 4.9 g / 100 ml
Protein: 3.4 g / 100 ml

</code></pre>
<p>And for reduced-fat milk:</p>

<pre><code>(Energy: 48 kcal / 100 ml)
Fat: 1.6 g / 100 ml
Carbs: 4.9 g / 100 ml
Protein: 3.5 g / 100 ml</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model">Model<a class="anchor-link" href="#Model">¶</a>
</h2>
<p>We setup an optimization model inspired by the classical <a href="https://en.wikipedia.org/wiki/Stigler_diet">diet problem</a>, where we want to use four ingredients (water, whole milk, reduced-fat milk, lactose) to match the nutrional profile of baby formula.</p>
<p>My thinking was that a blend of whole milk and reduced-fat milk should get the amount of fat right, while a dilution with water will get the protein level down to the target. Finally, we can add sugar in the form of lactose powder. This is widely available in drug stores, since it is also used as a mild laxative for infants.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="k">using</span> <span class="n">JuMP</span>
<span class="k">using</span> <span class="n">GLPKMathProgInterface</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="n">GLPKSolverLP</span><span class="p">())</span>

<span class="c"># our ingredients (without the implicit water)</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">whole_milk</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>   <span class="c"># in 100 ml</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lowfat_milk</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>  <span class="c"># in 100 ml</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lactose</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>      <span class="c"># in g</span>

<span class="c"># slack in our macro targets </span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">slack_fat</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">slack_carb</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">slack_protein</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># fit liquid volume (100 ml)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="n">lowfat_milk</span> <span class="o">≤</span> <span class="mi">1</span><span class="p">)</span>

<span class="c"># match fat content (g)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">3.9</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mf">1.6</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">==</span> <span class="mf">3.5</span> <span class="o">+</span> <span class="n">slack_fat</span><span class="p">)</span>

<span class="c"># match carb content (g)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">4.9</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mf">4.9</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">+</span> <span class="n">lactose</span> <span class="o">==</span> <span class="mf">7.3</span>  <span class="o">+</span> <span class="n">slack_carb</span> <span class="p">)</span>

<span class="c"># match protein content (g)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">3.4</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">==</span> <span class="mf">1.25</span>  <span class="o">+</span> <span class="n">slack_protein</span><span class="p">)</span>

<span class="c"># minimize the mismatch of target</span>
<span class="nd">@objective</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">:</span><span class="n">Min</span><span class="p">,</span> <span class="n">slack_carb</span> <span class="o">+</span> <span class="n">slack_fat</span> <span class="o">+</span> <span class="n">slack_protein</span><span class="p">);</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[2]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>:Optimal</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="nd">@show</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">whole_milk</span><span class="p">)</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">lowfat_milk</span><span class="p">)</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">lactose</span><span class="p">)</span>
<span class="nd">@show</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">slack_fat</span><span class="p">)</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">slack_carb</span><span class="p">)</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">slack_protein</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>getvalue(whole_milk) = 0.8974358974358976
getvalue(lowfat_milk) = 0.0
getvalue(lactose) = 2.902564102564101
getvalue(slack_fat) = 0.0
getvalue(slack_carb) = 0.0
getvalue(slack_protein) = 1.8012820512820515
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It seems that we can not get a perfect match since the slack variables are not zero.</p>
<p>In particular, we will overshoot the protein content, or else not meet the fat content. So, with these ingredients, we will not be able to reproduce the baby formula as planned.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-Canola-Oil">Adding Canola Oil<a class="anchor-link" href="#Adding-Canola-Oil">¶</a>
</h3>
<p>In order to reduce the protein content, we need another non-dairy fat source. Let us use rapeseed oil which is often recommended for preparation of (non-dairy) infant meals because of its neutral taste and rich content of essential fatty acids (omega-3).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="n">GLPKSolverLP</span><span class="p">())</span>

<span class="c"># our ingredients</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">whole_milk</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>   <span class="c"># in 100 ml</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lowfat_milk</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>  <span class="c"># in 100 ml</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lactose</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>      <span class="c"># in g</span>
<span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">oil</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>  <span class="c"># in g</span>

<span class="c"># no slack variables this time, we are confident in feasibility!</span>

<span class="c"># fit liquid volume (100ml)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="n">lowfat_milk</span> <span class="o">≤</span> <span class="mi">1</span><span class="p">)</span>

<span class="c"># match fat content (g)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">3.9</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mf">1.6</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">+</span> <span class="n">oil</span> <span class="o">==</span> <span class="mf">3.5</span><span class="p">)</span>

<span class="c"># match carb content (g)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">4.9</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mf">4.9</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">+</span> <span class="n">lactose</span> <span class="o">==</span> <span class="mf">7.3</span><span class="p">)</span>

<span class="c"># match protein content (g)</span>
<span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">3.4</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">==</span> <span class="mf">1.25</span><span class="p">)</span>

<span class="c"># minimize supplements</span>
<span class="nd">@objective</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">:</span><span class="n">Min</span><span class="p">,</span> <span class="n">lactose</span> <span class="o">+</span> <span class="n">oil</span><span class="p">);</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>:Optimal</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="nd">@show</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">whole_milk</span><span class="p">)</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">lowfat_milk</span><span class="p">)</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">lactose</span><span class="p">)</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">oil</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>getvalue(whole_milk) = 0.36764705882352944
getvalue(lowfat_milk) = 0.0
getvalue(lactose) = 5.498529411764705
getvalue(oil) = 2.0661764705882355
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The interpretation of this solution is as follows: To reproduce 100 ml of baby formula, we should mix 37 ml of whole milk with 5.5 g of lactose, 2 ml of oil and about 60 ml of water. Reduced-fat milk is not useful but both lactose and oil supplements are necessary.</p>
<p><strong>Of course, this only takes the macronutrients into account, while the sophisticated baby formulas also strive to meet the micronutrient needs of the baby</strong>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Diluting-the-Drink">Diluting the Drink<a class="anchor-link" href="#Diluting-the-Drink">¶</a>
</h3>
<p>Once the infant has reached a certain age, it is not necessary to supply its body with food every 3-4 hours anymore. In particular, they do not really need to drink milk during the night and might only do so out of habit. In fact, it seems that at one year old, the infant does not need even need to get any liquid and will be fine anyways.</p>
<p>At the same time, frequent food intake (in particular drinking) will increase the risk of tooth decay. So it makes sense to avoid night-time feeding.</p>
<p>In order to ensure some peaceful sleep nonetheless, I would like to scale down the energy content of our night-time drink over time. We will end up with just water, but go there in small steps. We will use our ingredients (with supplements) from above but change the targets: Rather then fixing the macronutrient levels, we will only ask for a specific energy content and put a limit on the protein level, since the infant's kidney might not be ready to handle larger amounts yet.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="k">function</span> <span class="n">dilution</span><span class="p">(</span><span class="n">rel_energy</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="n">GLPKSolverLP</span><span class="p">())</span>

    <span class="c"># our ingredients</span>
    <span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">whole_milk</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>   <span class="c"># in 100 ml</span>
    <span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lowfat_milk</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>  <span class="c"># in 100 ml</span>
    <span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lactose</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>      <span class="c"># in g</span>
    <span class="nd">@variable</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">oil</span> <span class="o">≥</span> <span class="mi">0</span><span class="p">)</span>  <span class="c"># in g</span>

    <span class="c"># fit liquid volume (100ml)</span>
    <span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="n">lowfat_milk</span> <span class="o">≤</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c"># match energy content (kcal)</span>
    <span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">68</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mi">48</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">lactose</span> <span class="o">+</span> <span class="mi">9</span> <span class="o">*</span> <span class="n">oil</span> <span class="o">==</span> <span class="n">rel_energy</span> <span class="o">*</span> <span class="mi">66</span><span class="p">)</span>
    
    <span class="c"># limit protein content (g)</span>
    <span class="nd">@constraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">3.4</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">lowfat_milk</span> <span class="o">&lt;=</span> <span class="mf">1.25</span><span class="p">)</span>

    <span class="c"># minimize supplements</span>
    <span class="nd">@objective</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">:</span><span class="n">Min</span><span class="p">,</span> <span class="n">lactose</span> <span class="o">+</span> <span class="n">oil</span><span class="p">);</span>

    <span class="n">status</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
    <span class="n">sol</span> <span class="o">=</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">whole_milk</span><span class="p">),</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">lowfat_milk</span><span class="p">),</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">lactose</span><span class="p">),</span> <span class="n">getvalue</span><span class="p">(</span><span class="n">oil</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">status</span><span class="p">,</span> <span class="n">sol</span>
<span class="k">end</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>dilution (generic function with 2 methods)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">status</span><span class="p">,</span> <span class="n">sol</span> <span class="o">=</span> <span class="n">dilution</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[7]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(:Optimal, (0.36764705882352944, 0.0, 0.0, 4.555555555555555))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By using a parameter value of 1, we will get a drink with the same energy content as our baby formula, but with a more relaxed relation of macronutrients.</p>
<p>Again, reduced-fat milk is not used and we find that only an oil supplement is needed but no sugar supplement. This makes sense, since the energy content of fat is higher than that of sugar and our objective here was to minimize the total mass of supplements.</p>
<p>Let us now compute a sequence of solutions with increasingly low energy content, over the course of two weeks.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="c"># iterate over parameter range and collect solutions</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">sols</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">rel_nrg</span> <span class="kp">in</span> <span class="n">r</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">sol</span> <span class="o">=</span> <span class="n">dilution</span><span class="p">(</span><span class="n">rel_nrg</span><span class="p">)</span>
    <span class="n">sol</span> <span class="o">=</span> <span class="n">collect</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span><span class="o">'</span> <span class="c"># tuple to row vector</span>
    <span class="n">push!</span><span class="p">(</span><span class="n">sols</span><span class="p">,</span> <span class="n">sol</span><span class="p">)</span>
<span class="k">end</span>

<span class="c"># collect all solutions values into one 2d-array</span>
<span class="n">sols</span> <span class="o">=</span> <span class="n">vcat</span><span class="p">(</span><span class="n">sols</span><span class="o">...</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>14×4 Array{Float64,2}:
 0.367647    0.0  0.0  4.55556  
 0.367647    0.0  0.0  3.99145  
 0.367647    0.0  0.0  3.42735  
 0.367647    0.0  0.0  2.86325  
 0.367647    0.0  0.0  2.29915  
 0.367647    0.0  0.0  1.73505  
 0.367647    0.0  0.0  1.17094  
 0.367647    0.0  0.0  0.606842 
 0.367647    0.0  0.0  0.0427396
 0.298643    0.0  0.0  0.0      
 0.223983    0.0  0.0  0.0      
 0.149322    0.0  0.0  0.0      
 0.0746615   0.0  0.0  0.0      
 9.70588e-7  0.0  0.0  0.0      </pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that we should never use more than 37 ml of whole milk per 100 ml of our drink.
In the beginning, this amount of milk stays the same and the oil supplementation will go down to account for the reduced energy content. Only when there is no more oil to be added, does the amount of milk go down. At this point, we will only mix whole milk and water.</p>
<p>Let us also analyze the macronutrient composition of our dilutions:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">whole_milk</span><span class="p">,</span> <span class="n">oil</span> <span class="o">=</span> <span class="n">sols</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">sols</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="n">fat</span> <span class="o">=</span> <span class="mf">3.9</span> <span class="o">*</span> <span class="n">whole_milk</span> <span class="o">+</span> <span class="n">oil</span>
<span class="n">carbs</span> <span class="o">=</span> <span class="mf">4.9</span> <span class="o">*</span> <span class="n">whole_milk</span>
<span class="n">protein</span> <span class="o">=</span> <span class="mf">3.4</span> <span class="o">*</span> <span class="n">whole_milk</span>

<span class="n">energy</span> <span class="o">=</span> <span class="mi">9</span> <span class="o">*</span> <span class="n">fat</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">carbs</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">protein</span>

<span class="n">macros</span> <span class="o">=</span> <span class="n">hcat</span><span class="p">(</span><span class="n">fat</span><span class="p">,</span> <span class="n">carbs</span><span class="p">,</span> <span class="n">protein</span><span class="p">,</span> <span class="n">energy</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>14×4 Array{Float64,2}:
 5.98938     1.80147     1.25      66.1103    
 5.42528     1.80147     1.25      61.0334    
 4.86118     1.80147     1.25      55.9565    
 4.29707     1.80147     1.25      50.8795    
 3.73297     1.80147     1.25      45.8026    
 3.16887     1.80147     1.25      40.7257    
 2.60477     1.80147     1.25      35.6488    
 2.04067     1.80147     1.25      30.5719    
 1.47656     1.80147     1.25      25.495     
 1.16471     1.46335     1.01539   20.3973    
 0.873532    1.09751     0.761541  15.298     
 0.582356    0.731678    0.507695  10.1987    
 0.29118     0.365841    0.253849   5.09938   
 3.78529e-6  4.75588e-6  3.3e-6     6.62912e-5</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Not surprisingly, our drink is relatively high in fat, more so than either whole milk or baby formula.</p>
<p>Similarly, we can compute the relative energy from macros in the above sequence:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">macro_nrg</span> <span class="o">=</span> <span class="n">hcat</span><span class="p">(</span><span class="mi">9</span> <span class="o">*</span> <span class="n">fat</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">carbs</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">protein</span><span class="p">)</span> <span class="o">./</span> <span class="n">energy</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>14×3 Array{Float64,2}:
 0.815371  0.108998  0.0756312
 0.800013  0.118065  0.0819224
 0.781868  0.128777  0.0893552
 0.760102  0.141626  0.0982713
 0.733511  0.157325  0.109164 
 0.70029   0.176937  0.122773 
 0.657607  0.202135  0.140257 
 0.600748  0.235703  0.163549 
 0.521243  0.28264   0.196117 
 0.513909  0.286969  0.199122 
 0.513909  0.286969  0.199122 
 0.513909  0.286969  0.199122 
 0.513909  0.286969  0.199122 
 0.513909  0.286969  0.199122 </pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Energy from fat gos down, while the contribution from carbs and protein goes up at the same rate:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-julia"><pre><span></span><span class="n">macro_nrg</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">./</span> <span class="n">macro_nrg</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>14-element Array{Float64,1}:
 1.4411764705882357
 1.4411764705882355
 1.4411764705882355
 1.4411764705882357
 1.4411764705882353
 1.4411764705882355
 1.4411764705882355
 1.4411764705882355
 1.4411764705882357
 1.4411764705882353
 1.4411764705882355
 1.4411764705882353
 1.4411764705882353
 1.4411764705882353</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That's it for this analysis. I'm sorry for the lack of visualization!</p>

</div>
</div>
</div>
    </div>
  </div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/julialang/" rel="tag">julialang</a></li>
            <li><a class="tag p-category" href="../../categories/modeling/" rel="tag">modeling</a></li>
            <li><a class="tag p-category" href="../../categories/nutrition/" rel="tag">nutrition</a></li>
            <li><a class="tag p-category" href="../../categories/optimization/" rel="tag">optimization</a></li>
            <li><a class="tag p-category" href="../../categories/parenting/" rel="tag">parenting</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../consonant-triads/" rel="prev" title="Consonant Triads">Previous post</a>
            </li>
            <li class="next">
                <a href="../index-funds-with-mixed-integer-programming/" rel="next" title="Index Funds with Mixed-Integer-Programming">Next post</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script></article>
</div>
        <!--End of body content-->

        <footer id="footer"></footer>
</div>
</div>

            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script src="../../assets/js/moment-with-locales.min.js"></script><script src="../../assets/js/fancydates.min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
